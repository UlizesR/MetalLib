# Which Objects Have Lighting? - Complete Guide

## ‚úÖ Objects That NOW Have Lighting

### 1. **Cubes** (`MKLDrawCube`) - ‚úÖ FULLY LIT
- Manually defined vertices with normals
- 24 vertices (4 per face) with correct normals
- **Works perfectly** with specular highlights

**Usage:**
```c
MKLEnableEnhancedRendering(renderer, true);
MKLDrawCube(renderer, cube, color);  // Automatically lit!
```

### 2. **OBJ Models** (`MKLDrawMesh`) - ‚úÖ FULLY LIT
- ModelIO automatically loads normals from .obj files
- If normals missing, ModelIO generates them
- **Supports all OBJ features** (normals, UVs, materials)

**Usage:**
```c
MKLEnableEnhancedRendering(renderer, true);
MKLMesh model = MKLMeshCreateWithFile(renderer, "model.obj");
MKLDrawMesh(renderer, &model, color);  // Automatically lit!
```

**Test it:**
```bash
make obj && ./bin/obj_viewer
```
Press 'L' to toggle lighting and see the difference!

### 3. **ModelIO Meshes** (MKLMesh functions) - ‚úÖ FULLY LIT

All these generate normals automatically via ModelIO:

- `MKLMeshPlane` - Generates plane with normals
- `MKLMeshBox` - Generates box with normals
- `MKLMeshSphere` - Generates sphere with smooth normals
- `MKLMeshCylinder` - Generates cylinder with normals
- `MKLMeshCapsule` - Generates capsule with normals

**Usage:**
```c
MKLEnableEnhancedRendering(renderer, true);

MKLMesh sphere;
MKLMeshSphere(&sphere, renderer, position, dimensions, segments, rotation);
MKLDrawMesh(renderer, &sphere, color);  // Automatically lit!
```

---

## ‚ö†Ô∏è Objects That DON'T Have Lighting Yet

### Legacy Draw Functions (Need Updates):

These still use the old vertex generation without normals:

1. `MKLDrawSphere` - Uses cached vector_float3 positions only
2. `MKLDrawCylinder` - Uses cached vector_float3 positions only
3. `MKLDrawCone` - Uses cached vector_float3 positions only
4. `MKLDrawTorus` - Uses cached vector_float3 positions only
5. `MKLDrawPlane` - Generates positions on-the-fly, no normals

### Workaround (Use ModelIO Instead):

Instead of:
```c
MKLDrawSphere(renderer, sphere, color);  // No lighting
```

Use:
```c
MKLMesh sphereMesh;
MKLMeshSphere(&sphereMesh, renderer, sphere.position, 
              (vector_float3){sphere.radius, sphere.radius, sphere.radius},
              (simd_uint2){sphere.segments, sphere.segments},
              sphere.rotation);
MKLDrawMesh(renderer, &sphereMesh, color);  // HAS lighting!
```

---

## üìã Quick Reference

| Function | Has Normals? | Lighting Works? | How to Get Lighting |
|----------|--------------|-----------------|---------------------|
| `MKLDrawCube` | ‚úÖ Yes | ‚úÖ Yes | Just enable enhanced rendering |
| `MKLDrawSphere` | ‚ùå No | ‚ùå No | Use `MKLMeshSphere` instead |
| `MKLDrawCylinder` | ‚ùå No | ‚ùå No | Use `MKLMeshCylinder` instead |
| `MKLDrawCone` | ‚ùå No | ‚ùå No | Create MKLMesh version |
| `MKLDrawTorus` | ‚ùå No | ‚ùå No | Create MKLMesh version |
| `MKLDrawPlane` | ‚ùå No | ‚ùå No | Use `MKLMeshPlane` instead |
| `MKLDrawMesh` | ‚úÖ Yes | ‚úÖ Yes | ModelIO provides normals |
| `MKLMesh*` functions | ‚úÖ Yes | ‚úÖ Yes | ModelIO generates normals |
| **OBJ Files** | ‚úÖ Yes | ‚úÖ Yes | Loaded/generated by ModelIO |

---

## üéØ Recommended Usage

### For Best Lighting Results:

**Option 1: Use ModelIO Mesh Functions** (Recommended)
```c
// Enable lighting
MKLEnableEnhancedRendering(renderer, true);
MKLAddLight(renderer, someLight);

// Create meshes (these have normals!)
MKLMesh sphere, box, cylinder;
MKLMeshSphere(&sphere, renderer, pos, dims, segs, rot);
MKLMeshBox(&box, renderer, pos, dims, segs, rot);
MKLMeshCylinder(&cylinder, renderer, pos, dims, segs, rot);

// Draw with lighting
MKLDrawMesh(renderer, &sphere, color);
MKLDrawMesh(renderer, &box, color);
MKLDrawMesh(renderer, &cylinder, color);
```

**Option 2: Use Cubes for Quick Prototyping**
```c
MKLEnableEnhancedRendering(renderer, true);
MKLDrawCube(renderer, cube, color);  // Works great!
```

**Option 3: Load OBJ Models**
```c
MKLEnableEnhancedRendering(renderer, true);
MKLMesh model = MKLMeshCreateWithFile(renderer, "model.obj");
MKLDrawMesh(renderer, &model, color);  // Perfect lighting!
```

---

## üîß How ModelIO Generates Normals

When you call `MKLMeshSphere`, `MKLMeshCylinder`, etc., ModelIO:

1. **Creates geometry** with the right topology
2. **Calculates smooth normals** for each vertex
3. **Generates UVs** for texture mapping
4. **Optimizes** the mesh for GPU rendering

The normals are **mathematically perfect**:
- Sphere: Normal = normalized position (radial)
- Cylinder: Normals perpendicular to surface
- Plane: Normal = (0, 1, 0) pointing up

---

## üöÄ Testing Each Object Type

### Test Cubes (Already Working):
```bash
make lighting && ./bin/lighting
```
‚ú® Look for shiny highlights on cube edges!

### Test OBJ Models (Now Working):
```bash
make obj && ./bin/obj_viewer
```
‚ú® Press 'L' to toggle - see the model get shiny highlights!

### Test ModelIO Primitives:
Create a test with `MKLMeshSphere`:
```c
MKLEnableEnhancedRendering(renderer, true);

MKLMesh sphere;
MKLMeshSphere(&sphere, renderer, 
              (vector_float3){0, 2, 0},
              (vector_float3){2, 2, 2},
              (simd_uint2){32, 32},
              (vector_float3){0, 0, 0});

while (rendering) {
    MKLDrawMesh(renderer, &sphere, MKL_COLOR_RED);  // Smooth sphere lighting!
}
```

---

## üé® Visual Differences

### Cube with Lighting:
```
   ‚ï±‚ó†‚ó†‚ó†‚ï≤  ‚Üê Bright highlight (specular)
  ‚ó† ‚ñà‚ñà‚ñà ‚ó†
 ‚ó†  ‚ñà‚ñà‚ñà  ‚ó†
‚ó†   ‚ñà‚ñà‚ñà   ‚ó†  ‚Üê Darker sides (away from light)
 ‚ó†‚ó†‚ó†‚ó†‚ó†‚ó†‚ó†
```

### Sphere with Lighting (ModelIO):
```
    ‚ó†‚ó†‚ó†
  ‚ó†‚ó† ‚òÖ ‚ó†‚ó†  ‚Üê Bright specular highlight
 ‚ó†‚ó†‚ó†‚ñà‚ñà‚ñà‚ó†‚ó†‚ó†
‚ó†‚ó†‚ó†‚ó†‚ñà‚ñà‚ñà‚ó†‚ó†‚ó†‚ó†
 ‚ó†‚ó†‚ó†‚ñà‚ñà‚ñà‚ó†‚ó†‚ó†  ‚Üê Smooth gradient (smooth normals)
  ‚ó†‚ó†‚ó†‚ó†‚ó†‚ó†‚ó†
```

### OBJ Model with Lighting:
```
Complex geometry with:
- ‚ú® Highlights on raised surfaces
- üåë Shadows in recessed areas
- üé® Smooth shading across faces
- üí´ Realistic 3D appearance
```

---

## üí° Summary

### What Works NOW:
‚úÖ **Cubes** - Hand-coded normals, perfect lighting  
‚úÖ **OBJ Files** - ModelIO loads normals automatically  
‚úÖ **MKLMesh primitives** - ModelIO generates perfect normals  

### What Needs Workaround:
‚ö†Ô∏è **MKLDrawSphere, Cylinder, etc.** - Use MKLMesh versions instead

### How to Enable Lighting:
```c
// 1. Enable enhanced rendering
MKLEnableEnhancedRendering(renderer, true);

// 2. Add lights
MKLLight sun = MKLCreateDirectionalLight(direction, color, intensity);
MKLAddLight(renderer, sun);

// 3. Draw supported objects
MKLDrawCube(renderer, cube, color);              // ‚úÖ Works!
MKLDrawMesh(renderer, &objModel, color);        // ‚úÖ Works!
MKLDrawMesh(renderer, &mklMeshSphere, color);   // ‚úÖ Works!
```

That's it! Objects with normals will automatically show lighting effects! ‚ú®

---

## üéâ Bottom Line

**Right Now, You Can Have Lighting On:**
1. ‚úÖ All cubes
2. ‚úÖ All OBJ models
3. ‚úÖ All MKLMesh-based primitives (sphere, cylinder, etc. via MKLMesh functions)

**To get lighting on legacy draw functions** (MKLDrawSphere, etc.), either:
- Use the MKLMesh equivalents (recommended)
- OR wait for them to be updated with normals (future work)

**The lighting is REAL and VISIBLE** - try the demos to see! ‚ú®

